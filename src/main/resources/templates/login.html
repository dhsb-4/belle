<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org" layout:decorate="main"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>登录</title>
    <link th:href="@{../css/login.css}" href="../static/css/login.css" rel="stylesheet">
    <script th:src="@{../js/jquery.min.js}" src="../static/js/jquery.min.js"></script>
</head>
<body>
<div class="dowebok">
    <div class="logo"></div>
    <div class="form-item">
        <input id="usrAccount" type="text" autocomplete="off" placeholder="帐号" th:onfocus="checkUsrName()" onfocus="checkUsrName()">
        <p class="tip" id="MsgUsrName">请输入帐号</p>
    </div>
    <div class="form-item">
        <input id="usrPassword" type="password" autocomplete="off" placeholder="登录密码" th:onfocus="checkUsrPassword()" onfocus="checkUsrPassword()">
        <p class="tip" id="MsgUsrPassword">用户或密码不正确</p>
    </div>
    <div class="form-item">
        <button id="submit" th:onclick= "jump()" onclick= "return yz()">登 录</button>  <!--onclick属性添加点击事件-->
    </div>
    <div class="reg-bar">
        <a class="reg" href="javascript:">立即注册</a>
        <a class="forget" href="javascript:">忘记密码</a>
    </div>
</div>
<script layout:fragment="js">

        /*function yz()                        //封装一个<body>中做成点击事件的函数
        {
            var usrName = document.getElementById("usrName").value;   //通过id名 找到 元素并重新 赋值
            var usrPassword = document.getElementById("usrPassword").value;

            if (usrName == "" || null)                //判断条件
            {
                var resultUsrName = document.getElementById("MsgUsrName");          //输出不满足条件的提示内容
                resultUsrName.style.display = "block";
                return false;
            } else if (usrPassword == "" || null) {
                var resultUsrPassword = document.getElementById("MsgUsrPassword");          //输出不满足条件的提示内容
                resultUsrPassword.style.display = "block";
                return false;
            } else {
                return true;
            }
        }*/
        function checkUsrName() {
            var resultUsrName=document.getElementById("MsgUsrName");          //输出不满足条件的提示内容
            resultUsrName.style.display="none";
        }
        function checkUsrPassword() {
            var resultUsrPassword=document.getElementById("MsgUsrPassword");          //输出不满足条件的提示内容
            resultUsrPassword.style.display="none";
        }
        //登录
        function jump() {
            var usrAccount = document.getElementById("usrAccount").value;
            var usrPassword = document.getElementById("usrPassword").value;
            var obj = {
                usrAccount:usrAccount,
                usrPassword:usrPassword,
            }
            if (usrAccount == "" || null)                //判断条件
            {
                var resultUsrName = document.getElementById("MsgUsrName");          //输出不满足条件的提示内容
                resultUsrName.style.display = "block";
                return false;
            } else if (usrPassword == "" || null) {
                var resultUsrPassword = document.getElementById("MsgUsrPassword");          //输出不满足条件的提示内容
                resultUsrPassword.style.display = "block";
                return false;
            } else {
                $.ajax({
                    "url": "user/dologin",        //login是登录接口
                    type: 'POST',
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(obj),
                    success: function (result) {
                        if (result == 1) {
                            alert("登录成功");

                        } else{
                            alert("账号或密码不正确");

                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert('网络异常！尝试刷新网页解决问题')

                    }
                });
                return true;
            }
        }



</script>
</body>
</html>